<!doctype html>
<html lang="pt-BR"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Fase 10 â€” Ãšltima</title><script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script><style>/* same style */:root{--p1:#6b2fb6;--p2:#9b6ef4}*{box-sizing:border-box;margin:0;padding:0}body{min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:Poppins;background:linear-gradient(135deg,#f7f2ff,#f0e8ff);padding:18px;color:#270a3a}.card{width:100%;max-width:520px;padding:20px;border-radius:14px;background:rgba(255,255,255,0.06);backdrop-filter:blur(6px);text-align:center;box-shadow:0 10px 30px rgba(107,47,182,0.12)}.qr-box{width:100%;height:320px;border-radius:12px;background:rgba(255,255,255,0.08);display:flex;align-items:center;justify-content:center;overflow:hidden;margin-bottom:10px}.hint{background:linear-gradient(90deg,#f3e8ff,#efe6fb);padding:10px;border-radius:10px;margin-bottom:10px;font-weight:700;color:#3a0c4a}.controls{display:flex;gap:10px;justify-content:center;margin-bottom:8px}button{background:linear-gradient(180deg,var(--p2),var(--p1));color:#fff;border:none;padding:10px 16px;border-radius:10px;cursor:pointer;font-weight:800}button.secondary{background:transparent;border:1px solid rgba(39,10,58,0.06);color:var(--p1)}.manual{margin-top:8px;display:flex;gap:8px;justify-content:center}input{padding:10px;border-radius:8px;border:1px solid rgba(39,10,58,0.06);width:60%}.modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:99}.modal .box{background:#fff;padding:20px;border-radius:12px;text-align:center;max-width:420px;width:90%}.box h2{color:var(--p1);margin-bottom:8px}</style></head><body>
<div class="card"><h1>Fase 10 â€” Ãšltima</h1><p class="lead">MissÃ£o final: depois de escanear, siga atÃ© o local indicado (onde o amor nasceu).</p><div class="qr-box" id="qr-region"></div><div class="hint">MissÃ£o final: depois de escanear, siga atÃ© o local indicado (onde o amor nasceu).</div><div class="controls"><button id="start-btn">ğŸ“· Escanear</button><button id="stop-btn" class="secondary" disabled>â¹ Parar</button></div><div class="manual"><input id="manual-input" placeholder="Digite o cÃ³digo (se precisar)"/><button id="manual-ok" class="secondary">Confirmar</button></div></div>
<div id="modal" class="modal"><div class="box"><h2>ğŸ‰ ParabÃ©ns!</h2><p>VocÃª completou todas as pistas â€” vÃ¡ atÃ© o local indicado agora ğŸ’œ</p><div style="margin-top:12px"><button id="modal-next">Ir para o Tesouro</button><button id="modal-close" class="secondary">Fechar</button></div></div></div>
<script>const expected='fase10';let scanner=null,scanning=false;const startBtn=document.getElementById('start-btn'), stopBtn=document.getElementById('stop-btn');const modal=document.getElementById('modal'), modalNext=document.getElementById('modal-next'), modalClose=document.getElementById('modal-close');const manualInput=document.getElementById('manual-input'), manualOk=document.getElementById('manual-ok');startBtn.addEventListener('click', async ()=>{ if(scanning) return; scanner=new Html5Qrcode('qr-region'); try{ const devices=await Html5Qrcode.getCameras(); if(!devices||devices.length===0){alert('Nenhuma cÃ¢mera disponÃ­vel');return;} const cam=devices.find(d=>/back|rear|trÃ¡s/i.test(d.label))||devices[0]; await scanner.start(cam.id,{fps:10,qrbox:250}, decoded=>{ if(String(decoded).trim().toLowerCase()===expected){ stopScanner(); showModal(); } }, ()=>{}); scanning=true; startBtn.disabled=true; stopBtn.disabled=false;}catch(e){console.error(e);alert('Erro ao acessar cÃ¢mera (permissÃµes/HTTPS).');}});function stopScanner(){ if(!scanning||!scanner) return; scanner.stop().then(()=>{scanner.clear();scanning=false;startBtn.disabled=false;stopBtn.disabled=true;}).catch(e=>console.warn(e)); } stopBtn.addEventListener('click', stopScanner); function showModal(){ modal.style.display='flex'; } function hideModal(){ modal.style.display='none'; } modalClose.addEventListener('click', hideModal); modalNext.addEventListener('click', ()=>location.href='fase11.html'); manualOk.addEventListener('click', ()=>{ const v=(manualInput.value||'').trim().toLowerCase(); if(!v) return; if(v===expected) showModal(); else alert('CÃ³digo incorreto ğŸ’œ'); });</script>
</body></html>
